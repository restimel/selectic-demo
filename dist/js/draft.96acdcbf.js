(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["draft"],{"27b8":function(t,e,i){},"32c9":function(t,e,i){"use strict";i("a4c0")},"55c7":function(t,e,i){"use strict";i.r(e);var s=i("7a23"),a={class:"home"},n=Object(s["g"])("h1",null,"Selectic sandbox",-1);function o(t,e,i,o,r,l){var c=Object(s["C"])("SelecticDraft");return Object(s["u"])(),Object(s["f"])("div",a,[n,Object(s["j"])(c)])}const r={class:"half"},l=Object(s["g"])("legend",null," Vue component ",-1),c=["highlight"],d={key:0,class:"error-message"},p=Object(s["g"])("legend",null," Example result ",-1),u=Object(s["g"])("div",{class:"spanHeight"},null,-1),h={class:"demo"},m=Object(s["g"])("div",{class:"spanHeight"},null,-1);function g(t,e,i,a,n,o){const g=Object(s["C"])("Selectic");return Object(s["u"])(),Object(s["f"])("div",r,[Object(s["g"])("fieldset",null,[l,Object(s["L"])(Object(s["g"])("textarea",{class:Object(s["p"])({"html-draft":!0,"has-error":!t.isHTMLValid,"my-editor":!0}),"onUpdate:modelValue":e[0]||(e[0]=e=>t.html=e),highlight:t.highlighter,language:"vue","line-numbers":""},null,10,c),[[s["I"],t.html]]),t.reason?(Object(s["u"])(),Object(s["f"])("div",d,Object(s["F"])(t.reason),1)):Object(s["e"])("",!0),(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["B"])(t.infoMessage,t=>(Object(s["u"])(),Object(s["f"])("div",{class:"info-message",key:t},Object(s["F"])(t),1))),128)),Object(s["g"])("div",null,[Object(s["g"])("button",{onClick:e[1]||(e[1]=(...e)=>t.redraw&&t.redraw(...e))}," Redraw component ")]),Object(s["g"])("div",null,[Object(s["g"])("label",null,[Object(s["L"])(Object(s["g"])("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=e=>t.scrollTest=e)},null,512),[[s["H"],t.scrollTest]]),Object(s["i"])(" Embed component in a scroll element ")])])]),Object(s["g"])("fieldset",{class:Object(s["p"])({"scroll-test":t.scrollTest})},[p,u,Object(s["g"])("div",h,[(Object(s["u"])(),Object(s["d"])(g,{params:t.selecticParams,child:t.selecticChild,onInput:e[3]||(e[3]=e=>t.selecticValue=e),key:"selectic-"+t.drawId,onInfo:e[4]||(e[4]=e=>t.messages=e)},null,8,["params","child"]))]),m,Object(s["g"])("label",{onDblclick:e[5]||(e[5]=(...e)=>t.saveCode&&t.saveCode(...e))},[Object(s["i"])(" Selected value: "),Object(s["g"])("output",null,Object(s["F"])(JSON.stringify(t.selecticValue)),1)],32)],2)])}const b=["value","label","disabled","title","icon"],f=["value","disabled","title","icon"],O=["value","disabled","title","icon","group"];function j(t,e,i,a,n,o){const r=Object(s["C"])("Selectic");return Object(s["u"])(),Object(s["d"])(r,{class:Object(s["p"])(["example",t.classNames]),style:Object(s["q"])(t.style),id:t.id,options:t.options,value:t.optionValue,groups:t.groups,placeholder:t.optionPlaceholder,title:t.optionTitle,multiple:t.multiple,disabled:t.disabled,selectionIsExcluded:t.selectionIsExcluded,texts:t.texts,open:t.open,noCache:t.noCache,params:t.optionParams,onInput:e[0]||(e[0]=e=>t.$emit("input",e))},{default:Object(s["K"])(()=>[t.elementChild.length>0?(Object(s["u"])(!0),Object(s["f"])(s["a"],{key:0},Object(s["B"])(t.elementChild,t=>(Object(s["u"])(),Object(s["f"])(s["a"],null,["optgroup"===t.tagName?(Object(s["u"])(),Object(s["f"])("optgroup",{value:t.id,label:t.text,disabled:!!t.disabled,title:t.title,icon:t.icon,key:t.id},[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["B"])(t.options,t=>(Object(s["u"])(),Object(s["f"])("option",{value:t.id,disabled:!!t.disabled,title:t.title,icon:t.icon,key:t.id},Object(s["F"])(t.text),9,f))),128))],8,b)):(Object(s["u"])(),Object(s["f"])("option",{value:t.id,disabled:!!t.disabled,title:t.title,icon:t.icon,group:t.group,key:t.id},Object(s["F"])(t.text),9,O))],64))),256)):Object(s["e"])("",!0)]),_:1},8,["class","style","id","options","value","groups","placeholder","title","multiple","disabled","selectionIsExcluded","texts","open","noCache","params"])}var w=i("ee45");const x=1500,y=new Array(x),k=new Array(x),C=new Array(x),v=" --- short text added",$=" --- this is a long text added to the description which should need scrolling to be readabled";for(let X=0;X<x;X++)y[X]={id:X,text:"option #"+X},k[X]={id:"id-"+X,text:`option "${X}"`},C[X]={id:"id-"+X,text:`option "${X}"${X%2?v:$}`};const S=[],I=[{id:"alone",text:"The only option"}],N=[{id:0,text:"First option"},{id:1,text:"Second option"},{id:2,text:"Third option"},{id:3,text:"Fourth option"}],T=[{id:"first",text:"First option"},{id:"second",text:"Second option"},{id:"third",text:"Third option"},{id:"fourth",text:"Fourth option"}],F=[{id:"shortInt",text:"short with numerical id",options:N},{id:"shortStr",text:"short with string id",options:T},{id:"longInt",text:"long with numerical id",options:y},{id:"longStr",text:"long with string id",options:k},{id:"longStrlong",text:"long list with long description",options:C}],V={list0:S,emptyOptions:S,empty:S,list01:I,oneOptions:I,one:I,list1:N,shortNumOptions:N,shortNum:N,list2:y,longNumOptions:y,longNum:y,list3:T,shortStringOptions:T,shortString:T,list4:k,longStringOptions:k,longString:k,longStringLong:C,list5:F,groupOptions:F,group:F},M=new Map([[S,"no items (is empty)"],[I,"only one item (with a string id)"],[N,"4 items (with numeric id)"],[y,"1500 items (with numeric id)"],[T,"4 items (with string id)"],[k,"1500 items (with string id)"],[C,"1500 items (with string id) and long description"],[F,"4 groups with differents items (total of 3008 items)"]]);function R(t){return new Promise(e=>{setTimeout(e,t)})}function H(t){const[e,i]=t.toString().split("-");return"dyn"!==e?-1:+i}const D=20,L=function(t,e=0){let i=Math.abs(t);return t<0&&(i*=D),async function(s,a,n){let o,r=i,l=[];if(s){o=[];const e=new RegExp(s.replace(/([-+\[\]\(\){}?^$.])/g,"$1").replace(/[*]/g,".*"),"i");for(let s=a;s<i;s++){const i="Dynamic option: "+s;if(e.test(i)){const e={id:"dyn-"+s,text:i};t<0&&(e.group="group"+Math.floor(s/D)),o.push(e)}}r=o.length}if(a<r)for(let e=a;e<r&&e<a+n;e++)if(s)l.push(o[e-a]);else{const i="Dynamic option: "+e,s={id:"dyn-"+e,text:i};t<0&&(s.group="group"+Math.floor(e/D)),l.push(s)}return e&&await R(e),{total:r,result:l}}},E=function(t,e=0){const i=Math.abs(t);return async function(t){let s=t.reduce((t,e)=>{const s=H(e);return s>=0&&s<i&&t.push({id:e,text:"Dynamic option: "+e}),t},[]);return e&&await R(e),s}};var P=Object(s["k"])({name:"WrapSelectic",props:{params:{default(){return{}}},child:{default(){return[]}}},data(){return{needRedraw:!1}},computed:{options(){const t=this.params.options;if("undefined"!==typeof t){if("string"===typeof t){const e=V[t];return e||[]}return t}},classNames(){return this.params["class"]},style(){return this.params.style},id(){return this.params.id},multiple(){return this.params.multiple},disabled(){return this.params.disabled},optionValue(){return this.params.value||null},optionPlaceholder(){return this.params.placeholder},optionTitle(){return this.params.title},groups(){return this.params.groups},optionParams(){const t=Object.assign({},this.params.params);if("string"===typeof t.fetchCallback){const[,e,i,s]=t.fetchCallback.match(/(\w+?)(\d+)(?:[-:]+(\d+))?/)||[],a="group"===e?-i:+i;t.fetchCallback=L(a,+s||0)}if("string"===typeof t.getItemsCallback){const[,e,i,s]=t.getItemsCallback.match(/(\w+?)(\d+)(?:[-:]+(\d+))?/)||[],a="group"===e?-i:+i;t.getItemsCallback=E(a,+s||0)}return t},open(){return this.params.open},noCache(){return this.params.noCache},selectionIsExcluded(){return this.params.selectionIsExcluded},texts(){return this.params.texts},elementChild(){return this.child},message(){const t=[],e=this.params.options,i=this.params.params&&this.params.params.fetchCallback,s=this.params.params&&this.params.params.getItemsCallback;if("string"===typeof e){const i=V[e],s=M.get(i);s?t.push(`'${e}' is a shorthand for a list containing ${s}.`):t.push(`'${e}' is not correctly interpreted by the example page!`)}if("string"===typeof i){const[,e,s,a=0]=i.match(/(\w+?)(\d+)(?:[-:]+(\d+))?/)||[];let n="",o="";n="group"===e?`${s} groups (with ${D} items each)`:s+" items",o=a>0?`[resolved after a delay of ${a}ms]`:"[resolved immediately]",t.push(`'${i}' is a shorthand for a promise which return ${n}. ${o}`)}if("string"===typeof s){const[,e,i,a=0]=s.match(/(\w+?)(\d+)(?:[-:]+(\d+))?/)||[];let n="",o="";n="group"===e?`${i} groups (with ${D} items each)`:i+" items",o=a>0?`[resolved after a delay of ${a}ms]`:"[resolved immediately]",t.push(`'${s}' is a shorthand for a promise which get items from ${n}. ${o}`)}return t.join("\n")}},methods:{sendInfo(){this.$emit("info",{needRedraw:this.needRedraw,message:this.message})}},watch:{needRedraw(){this.sendInfo()},message(){this.sendInfo()},multiple(){this.needRedraw=!0},"params.params"(t,e){try{JSON.stringify(e)!==JSON.stringify(t)&&(this.needRedraw=!0)}catch(i){return}}},created(){this.sendInfo()},components:{Selectic:w["a"]}}),J=(i("691b"),i("6b0d")),A=i.n(J);const U=A()(P,[["render",j]]);var B=U;function W(t){return t.replace(/(?:(["'])([^\1\n]+?)\1|(\w+))\s*:/g,(t,e,i,s)=>{const a=i||s;return`"${a}":`}).replace(/'([^'\n]*?)'/g,(t,e)=>`"${e}"`)}function K(){const t=document.location.search,[,e=""]=t.match(/[?&]code=((?:\w|%)+)\b/)||[];return decodeURIComponent(e)}var q=Object(s["k"])({name:"Draft",data(){return this.$nextTick(()=>{this.htmlChange(),this.redraw()}),{html:K()||"<Selectic\n    :options=\"'list1'\"\n/>",selecticParams:{options:"list1"},selecticChild:[],isHTMLValid:!0,selecticValue:null,reason:"",messages:{needRedraw:!1,message:""},drawId:0,scrollTest:!1}},computed:{infoMessage(){const t=this.messages,e=t.message.split("\n").filter(t=>t);return t.needRedraw&&e.push("The component needs to be redrawn"),e}},methods:{redraw(){this.selecticValue=null,this.drawId++},onKey(t){const e=t.key;"Tab"===e&&t.preventDefault},saveCode(){const t=encodeURIComponent(this.html).replace(/-/g,"%2D");let e=document.location.href;e=e.replace(/(?:&|(?<=\?))code=[^&]*/,""),e.includes("?")||(e+="?"),e.endsWith("?")||(e+="&"),e+="code="+t,console.dir(e)},highlighter(t){return t.replace(/</g,"&lt;")},htmlChange(){const t=this.html,[e,,i]=this.parseHTML(t);if(this.isHTMLValid=!1!==e,i){const t=i.params,e=i.child.map(t=>{const e=t.child.filter(t=>"text"!==t.tagName).map(t=>({tagName:t.tagName,id:t.params.id||t.params.value,text:t.params.label||t.child[0]&&t.child[0].params&&t.child[0].params.text,title:t.params.title,disabled:t.params.disabled,icon:t.params.icon,group:t.params.group,options:[]}));return{tagName:t.tagName,id:t.params.id||t.params.value,text:t.params.label||t.child[0]&&t.child[0].params&&t.child[0].params.text,title:t.params.title,disabled:t.params.disabled,icon:t.params.icon,group:t.params.group,options:e}});this.selecticParams=t,this.selecticChild=e}},parseHTML(t,e=""){let i=0;const s=t.length;let a="outside",n="",o="",r=!1,l="";const c={},d=[],p={outside:{lookFor:/[<]/,escape:/[]/,isCapturing:!1},inside:{lookFor:/[/>:\w]/,escape:/[]/,isCapturing:!1},tagName:{lookFor:/[\s>]/,escape:/[]/,isCapturing:!0},attribute:{lookFor:/[=\s>]/,escape:/[]/,isCapturing:!0},attributeValue:{lookFor:/["]/,escape:/[\\]/,isCapturing:!0},child:{lookFor:/[^\s]/,escape:/[]/,isCapturing:!1},childText:{lookFor:/[<]/,escape:/[]/,isCapturing:!0},end:{lookFor:/./,escape:/[]/,isCapturing:!1}};t:for(i=0;i<s;i++){const s=t.charAt(i),h=t.charAt(i+1),m=p[a];if(m.lookFor.test(s)){switch(a){case"outside":a="tagName";break;case"inside":if("/"===s){if(">"!==h)return this.reason="wrong tag ending",[!1];i++,a="end";break t}if(">"===s){a="child";break}a="attribute",":"!==s?(r=!1,i--):r=!0;break;case"tagName":if(l=n,""===l)return this.reason="empty tagName",[!1];if(l.startsWith("/")){const t=l.slice(1)===e;return t||(this.reason="wrong tag ending"),[t,i+1,{},[]]}a=">"===s?"child":"inside";break;case"attribute":o=n.trim(),"="===s?(a="attributeValue"," "===h&&i++,i++):(c[o]=!0,a="inside");break;case"attributeValue":try{c[o]=r?JSON.parse(W(n)):n}catch(u){return this.reason="attribute value is not correct",[!1]}a="inside";break;case"child":if("<"===s){const[e,s,n]=this.parseHTML(t.slice(i),l);if(!1===e)return[!1];if(i+=s,!0===e){a="end";break t}d.push(n);break}a="childText",i--;break;case"childText":d.push({params:{text:n.trim()},child:[],tagName:"text"}),a="child",i--;break}n=""}else m&&m.isCapturing&&(n+=s,m.escape.test(s)&&(n+=h,i++))}return"end"!==a?(this.reason=`tag ${l} is not finished`,[!1]):(this.reason="",[null,i,{params:c,child:d,tagName:l}])}},watch:{html(){this.htmlChange()}},components:{Selectic:B}});i("32c9");const _=A()(q,[["render",g]]);var z=_,G=Object(s["k"])({name:"Home",components:{SelecticDraft:z}});i("9aeb");const Q=A()(G,[["render",o]]);e["default"]=Q},"691b":function(t,e,i){"use strict";i("27b8")},"6fbf":function(t,e,i){},"9aeb":function(t,e,i){"use strict";i("6fbf")},a4c0:function(t,e,i){}}]);
//# sourceMappingURL=draft.96acdcbf.js.map