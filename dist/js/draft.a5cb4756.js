(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["draft"],{"3aa7":function(e,t,a){},"3d63":function(e,t,a){"use strict";a("6dc9")},"55c7":function(e,t,a){"use strict";a.r(t);var s=a("7a23"),i={class:"home"},r=Object(s["g"])("h1",null,"Selectic sandbox",-1);function l(e,t,a,l,c,n){var o=Object(s["C"])("SelecticDraft");return Object(s["u"])(),Object(s["f"])("div",i,[r,Object(s["j"])(o)])}const c={class:"half"},n=Object(s["g"])("legend",null," Vue component ",-1),o=["highlight"],d={key:0,class:"error-message"},p=Object(s["g"])("legend",null," Example result ",-1),u=Object(s["g"])("div",{class:"spanHeight"},null,-1),h={class:"demo"},m=Object(s["g"])("div",{class:"spanHeight"},null,-1);function b(e,t,a,i,r,l){const b=Object(s["C"])("Selectic");return Object(s["u"])(),Object(s["f"])("div",c,[Object(s["g"])("fieldset",null,[n,Object(s["M"])(Object(s["g"])("textarea",{class:Object(s["p"])({"html-draft":!0,"has-error":!e.isHTMLValid,"my-editor":!0}),"onUpdate:modelValue":t[0]||(t[0]=t=>e.html=t),highlight:e.highlighter,language:"vue","line-numbers":""},null,10,o),[[s["I"],e.html]]),e.reason?(Object(s["u"])(),Object(s["f"])("div",d,Object(s["F"])(e.reason),1)):Object(s["e"])("",!0),(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["B"])(e.infoMessage,e=>(Object(s["u"])(),Object(s["f"])("div",{class:"info-message",key:e},Object(s["F"])(e),1))),128)),Object(s["g"])("div",null,[Object(s["g"])("button",{onClick:t[1]||(t[1]=(...t)=>e.redraw&&e.redraw(...t))}," Redraw component ")]),Object(s["g"])("div",null,[Object(s["g"])("label",null,[Object(s["M"])(Object(s["g"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.scrollTest=t)},null,512),[[s["H"],e.scrollTest]]),Object(s["i"])(" Embed component in a scroll element ")])])]),Object(s["g"])("fieldset",{class:Object(s["p"])({"scroll-test":e.scrollTest})},[p,u,Object(s["g"])("div",h,[(Object(s["u"])(),Object(s["d"])(b,{params:e.selecticParams,child:e.selecticChild,onInput:t[3]||(t[3]=t=>e.selecticValue=t),key:"selectic-"+e.drawId,onInfo:t[4]||(t[4]=t=>e.messages=t)},null,8,["params","child"]))]),m,Object(s["g"])("label",{onDblclick:t[5]||(t[5]=(...t)=>e.saveCode&&e.saveCode(...t))},[Object(s["i"])(" Selected value: "),Object(s["g"])("output",null,Object(s["F"])(JSON.stringify(e.selecticValue)),1)],32)],2)])}const g=["value","label","disabled","title","icon"],f=["value","disabled","title","icon"],O=["value","disabled","title","icon","group"];function j(e,t,a,i,r,l){const c=Object(s["C"])("Selectic");return Object(s["u"])(),Object(s["d"])(c,{class:Object(s["p"])(["example",e.classNames]),style:Object(s["q"])(e.style),id:e.id,options:e.options,value:e.optionValue,groups:e.groups,placeholder:e.optionPlaceholder,title:e.optionTitle,multiple:e.multiple,disabled:e.disabled,selectionIsExcluded:e.selectionIsExcluded,texts:e.texts,open:e.open,noCache:e.noCache,params:e.optionParams,onInput:t[0]||(t[0]=t=>e.$emit("input",t))},{default:Object(s["L"])(()=>[e.elementChild.length>0?(Object(s["u"])(!0),Object(s["f"])(s["a"],{key:0},Object(s["B"])(e.elementChild,e=>(Object(s["u"])(),Object(s["f"])(s["a"],null,["optgroup"===e.tagName?(Object(s["u"])(),Object(s["f"])("optgroup",{value:e.id,label:e.text,disabled:!!e.disabled,title:e.title,icon:e.icon,key:e.id},[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["B"])(e.options,e=>(Object(s["u"])(),Object(s["f"])("option",{value:e.id,disabled:!!e.disabled,title:e.title,icon:e.icon,key:e.id},Object(s["F"])(e.text),9,f))),128))],8,g)):(Object(s["u"])(),Object(s["f"])("option",{value:e.id,disabled:!!e.disabled,title:e.title,icon:e.icon,group:e.group,key:e.id},Object(s["F"])(e.text),9,O))],64))),256)):Object(s["e"])("",!0)]),_:1},8,["class","style","id","options","value","groups","placeholder","title","multiple","disabled","selectionIsExcluded","texts","open","noCache","params"])}var k=a("ee45"),w=a("945b"),C=a("cff9"),v=Object(s["k"])({name:"WrapSelectic",props:{params:{default(){return{}}},child:{default(){return[]}}},data(){return{needRedraw:!1}},computed:{options(){const e=this.params.options;if("undefined"!==typeof e){if("string"===typeof e){const t=w["b"][e];return t||[]}return e}},classNames(){return this.params["class"]},style(){return this.params.style},id(){return this.params.id},multiple(){return this.params.multiple},disabled(){return this.params.disabled},optionValue(){return this.params.value||null},optionPlaceholder(){return this.params.placeholder},optionTitle(){return this.params.title},groups(){return this.params.groups},optionParams(){const e=Object.assign({},this.params.params);if("string"===typeof e.fetchCallback){const[,t,a,s]=e.fetchCallback.match(/(\w+?)(\d+)(?:[-:]+(\d+))?/)||[],i="group"===t?-a:+a;e.fetchCallback=Object(C["a"])(i,+s||0)}if("string"===typeof e.getItemsCallback){const[,t,a,s]=e.getItemsCallback.match(/(\w+?)(\d+)(?:[-:]+(\d+))?/)||[],i="group"===t?-a:+a;e.getItemsCallback=Object(C["b"])(i,+s||0)}return e},open(){return this.params.open},noCache(){return this.params.noCache},selectionIsExcluded(){return this.params.selectionIsExcluded},texts(){return this.params.texts},elementChild(){return this.child},message(){const e=[],t=this.params.options,a=this.params.params&&this.params.params.fetchCallback,s=this.params.params&&this.params.params.getItemsCallback;if("string"===typeof t){const a=w["b"][t],s=w["a"].get(a);s?e.push(`'${t}' is a shorthand for a list containing ${s}.`):e.push(`'${t}' is not correctly interpreted by the example page!`)}if("string"===typeof a){const[,t,s,i=0]=a.match(/(\w+?)(\d+)(?:[-:]+(\d+))?/)||[];let r="",l="";r="group"===t?`${s} groups (with ${C["c"]} items each)`:s+" items",l=i>0?`[resolved after a delay of ${i}ms]`:"[resolved immediately]",e.push(`'${a}' is a shorthand for a promise which return ${r}. ${l}`)}if("string"===typeof s){const[,t,a,i=0]=s.match(/(\w+?)(\d+)(?:[-:]+(\d+))?/)||[];let r="",l="";r="group"===t?`${a} groups (with ${C["c"]} items each)`:a+" items",l=i>0?`[resolved after a delay of ${i}ms]`:"[resolved immediately]",e.push(`'${s}' is a shorthand for a promise which get items from ${r}. ${l}`)}return e.join("\n")}},methods:{sendInfo(){this.$emit("info",{needRedraw:this.needRedraw,message:this.message})}},watch:{needRedraw(){this.sendInfo()},message(){this.sendInfo()},multiple(){this.needRedraw=!0},"params.params"(e,t){try{JSON.stringify(t)!==JSON.stringify(e)&&(this.needRedraw=!0)}catch(a){return}}},created(){this.sendInfo()},components:{Selectic:k["a"]}}),y=(a("3d63"),a("6b0d")),x=a.n(y);const $=x()(v,[["render",j]]);var I=$;function N(e){return e.replace(/(?:(["'])([^\1\n]+?)\1|(\w+))\s*:(?:\s*(["'])([^\4\n]*?)\4)?/g,(e,t,a,s,i,r)=>{const l=a||s,c=r?`"${r}"`:"";return`"${l}":${c}`}).replace(/'([^'\n]*?)'/g,(e,t)=>`"${t}"`)}function T(){const e=document.location.search,[,t=""]=e.match(/[?&]code=((?:\w|%)+)\b/)||[];return decodeURIComponent(t)}var V=Object(s["k"])({name:"Draft",data(){return this.$nextTick(()=>{this.htmlChange(),this.redraw()}),{html:T()||"<Selectic\n    :options=\"'list1'\"\n/>",selecticParams:{options:"list1"},selecticChild:[],isHTMLValid:!0,selecticValue:null,reason:"",messages:{needRedraw:!1,message:""},drawId:0,scrollTest:!1}},computed:{infoMessage(){const e=this.messages,t=e.message.split("\n").filter(e=>e);return e.needRedraw&&t.push("The component needs to be redrawn"),t}},methods:{redraw(){this.selecticValue=null,this.drawId++},onKey(e){const t=e.key;"Tab"===t&&e.preventDefault},saveCode(){const e=encodeURIComponent(this.html).replace(/-/g,"%2D");let t=document.location.href;t=t.replace(/(?:&|(?<=\?))code=[^&]*/,""),t.includes("?")||(t+="?"),t.endsWith("?")||(t+="&"),t+="code="+e,console.dir(t)},highlighter(e){return e.replace(/</g,"&lt;")},htmlChange(){const e=this.html,[t,,a]=this.parseHTML(e);if(this.isHTMLValid=!1!==t,a){const e=a.params,t=a.child.map(e=>{const t=e.child.filter(e=>"text"!==e.tagName).map(e=>({tagName:e.tagName,id:e.params.id||e.params.value,text:e.params.label||e.child[0]&&e.child[0].params&&e.child[0].params.text,title:e.params.title,disabled:e.params.disabled,icon:e.params.icon,group:e.params.group,options:[]}));return{tagName:e.tagName,id:e.params.id||e.params.value,text:e.params.label||e.child[0]&&e.child[0].params&&e.child[0].params.text,title:e.params.title,disabled:e.params.disabled,icon:e.params.icon,group:e.params.group,options:t}});this.selecticParams=e,this.selecticChild=t}},parseHTML(e,t=""){let a=0;const s=e.length;let i="outside",r="",l="",c=!1,n="";const o={},d=[],p={outside:{lookFor:/[<]/,escape:/[]/,isCapturing:!1},inside:{lookFor:/[/>:\w]/,escape:/[]/,isCapturing:!1},tagName:{lookFor:/[\s>]/,escape:/[]/,isCapturing:!0},attribute:{lookFor:/[=\s>]/,escape:/[]/,isCapturing:!0},attributeValue:{lookFor:/["]/,escape:/[\\]/,isCapturing:!0},child:{lookFor:/[^\s]/,escape:/[]/,isCapturing:!1},childText:{lookFor:/[<]/,escape:/[]/,isCapturing:!0},end:{lookFor:/./,escape:/[]/,isCapturing:!1}};e:for(a=0;a<s;a++){const s=e.charAt(a),h=e.charAt(a+1),m=p[i];if(m.lookFor.test(s)){switch(i){case"outside":i="tagName";break;case"inside":if("/"===s){if(">"!==h)return this.reason="wrong tag ending",[!1];a++,i="end";break e}if(">"===s){i="child";break}i="attribute",":"!==s?(c=!1,a--):c=!0;break;case"tagName":if(n=r,""===n)return this.reason="empty tagName",[!1];if(n.startsWith("/")){const e=n.slice(1)===t;return e||(this.reason="wrong tag ending"),[e,a+1,{},[]]}i=">"===s?"child":"inside";break;case"attribute":l=r.trim(),"="===s?(i="attributeValue"," "===h&&a++,a++):(o[l]=!0,i="inside");break;case"attributeValue":try{o[l]=c?JSON.parse(N(r)):r}catch(u){return this.reason="attribute value is not correct",console.error('Error while parsing attribute value "%s"',r,u.message),[!1]}i="inside";break;case"child":if("<"===s){const[t,s,r]=this.parseHTML(e.slice(a),n);if(!1===t)return[!1];if(a+=s,!0===t){i="end";break e}d.push(r);break}i="childText",a--;break;case"childText":d.push({params:{text:r.trim()},child:[],tagName:"text"}),i="child",a--;break}r=""}else m&&m.isCapturing&&(r+=s,m.escape.test(s)&&(r+=h,a++))}return"end"!==i?(this.reason=`tag ${n} is not finished`,[!1]):(this.reason="",[null,a,{params:o,child:d,tagName:n}])}},watch:{html(){this.htmlChange()}},components:{Selectic:I}});a("f742");const F=x()(V,[["render",b]]);var S=F,R=Object(s["k"])({name:"Home",components:{SelecticDraft:S}});a("9aeb");const H=x()(R,[["render",l]]);t["default"]=H},"6dc9":function(e,t,a){},"6fbf":function(e,t,a){},"9aeb":function(e,t,a){"use strict";a("6fbf")},f742:function(e,t,a){"use strict";a("3aa7")}}]);
//# sourceMappingURL=draft.a5cb4756.js.map